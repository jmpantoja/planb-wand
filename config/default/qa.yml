---
tasks:
  "init/qa":
    classname: \PlanB\Wand\Core\Task\SimpleTask
    description: wubba lubba dub dub
    actions:
      phpcs_xml:
      phpmd_xml:

  qa:
    classname: \PlanB\Wand\Qa\Task\QaTask
    description: wubba lubba dub dub
    actions:
      lint:
      phpcpd:
      phpmd:
      phpcbf:
      phpcs:
      restage:

actions:
  phpcs_xml:
        group: qa
        classname: \PlanB\Wand\Core\File\File
        params:
          template: '@wand.qa/phpcs.twig'
          target: .phpcs.xml
          action: create
          chmod: 0644

  phpmd_xml:
        group: qa
        classname: \PlanB\Wand\Core\File\File
        params:
          template: '@wand.qa/phpmd.twig'
          target: .phpmd.xml
          action: create
          chmod: 0644

  lint:
    group: qa
    classname: \PlanB\Wand\Core\Command\SymfonyCommand
    params:
      pattern: vendor/bin/phplint --no-configuration %changes%
      command: \Overtrue\PHPLint\Command\LintCommand
      only_modified: true

  phpcpd:
    group: qa
    classname: \PlanB\Wand\Core\Command\SymfonyCommand
    params:
      pattern: vendor/bin/phpcpd --min-tokens 30 %changes%
      command: \PlanB\Wand\Legacy\Phpcpd\PhpcpdCommand
      only_modified: true

  phpmd:
    group: qa
    classname: \PlanB\Wand\Qa\Command\PhpmdCommand
    params:
      pattern: vendor/bin/phpmd %changes% text %project%/.phpmd.xml --minimumpriority 3
      only_modified: true

  phpcbf:
    group: qa
    classname: \PlanB\Wand\Qa\Command\PhpcbfCommand
    params:
      pattern: vendor/bin/phpcbf %changes% -p --standard=%project%/.phpcs.xml -q
      only_modified: true

  phpcs:
    group: qa
    classname: \PlanB\Wand\Qa\Command\PhpcsCommand
    params:
      pattern: vendor/bin/phpcs %changes% -p --standard=%project%/.phpcs.xml -q
      only_modified: true







